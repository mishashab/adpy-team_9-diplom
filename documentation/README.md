# Командный проект VKinder
## Документрация по использованию программы:
1. Создать группу во Вкотакте, от имени которой будет общаться разрабатынный бот
2. Создать токен для бота:
    * Зайти в созданную группу -> Управление -> Работа с API. Вкладка "LongPoll API", ключить LongPoll API
    ![LongPoll API enable](LongPollAPI.jpg)
    * Перейти во вкладку "Типы событий" и дать боту соответствующие права
    ![LongPoll API Events](LongPollAPIEvents.jpg)
    * Вернуться во кладку "Ключи доступа". Создать ключ
     ![Create LongPoll API key](CreateLongPollAPI.jpg)
    * Перейти в Управление -> Сообщения Убедиться, что Сообщения сообщества включены:
    ![Enable message](EnableMsg.jpg)
    * Перейти в Управление -> Сообщения -> Настройки для бота, включить "Возможности ботов"
    ![Enable Bot Opportunities](BotOpportunities.jpg)
    * Перейти  Управление -> Работа с API, скопировать созданный ключ и сохранить в VKinder/token_id.py в переменную *bot_token*
3. Далее необходимо создать токен для пользователя, который будет общаться с ботом:
    * Получить токен для ВК можно выполнив [инструкцию](https://docs.google.com/document/d/1_xt16CMeaEir-tWLbUFyleZl6woEdJt-7eyva1coT3w/edit?usp=sharing)
    * Полученый токен сохранить в переменную *user_token* VKinder/token_id.py
4. Установим зависимости из файла requirements.txt командой 
```python
pip install -r requirements.txt
```
5. Для работы программы нужна база данных. Создадим базу postgreSQL:
```console
createdb -U postgres course_w
```
где postgres имя пользователя, course_w название базы данных

6. В файле token_id.py заполним необходимы данные для работы базы данных:
```python
atabase = "data_base_name"
user = "user_name"
password = "password"
```
7. Теперь всё готово для начала работы с ботом. Запустим программу
8. В созданной группе напишем сообщение боту "Привет". Бот получит данные о пользователе и выведет их в ответном приветственном сообщении и спросит вас о дальнейших действиях (*Для работы с ботом можно воспользоваться интуитивным интерфесом, либо вводить команды*)
![Hi bot](HImsg.jpg)
9. Если вы уже пользовались поиском и были добавлены люди в избранное, можно вывести его содержимое выполнив команду "просмотреть избранное" или "избранное". Бот выполнит поиск по вашим параметрам. (*Бот ищет людей противоположного пола, если у спрашивающего пользователя пол не указан, то ищет всех*).
10. Когда бот завершит поиск, он выведет найденного человека в чат.
![View catalog](ViewCatalog.jpg)
11. Если человек понравился, можно добавить его в избранное, выполнив команду "В избранное" или "добавить в избранное" (*Если человек добавлен в избранное, то при повторном просмотре каталога он не будет выведен*)
12. Если человек неприятен и его больше не хочется видеть, то команда "в черный список", "в чс" или "нет", поможет нам его скрыть, при повторном поиске он не будет отображаться.
13. Для перехода к следующему человеку введём команду "продолжить подбор" или "Дальше"
14. После того как будет просмотрен весь каталог, бот выведет сообщение "Мы посмотрели всё! Заново?". Можно воспользоваться одной из команд для продолжения.
15. Если долго не обращаться к боту в открытом чате, API может дисконнектить бота. Если это произошло, бот перезапустится и выведет в чат сообщение "Бот на связи", достаточно с ним поздороваться или ввести одну из команд описаных выше.
16. В консоли визуально можно отслеживать ход выполнения программы.
